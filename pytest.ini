# pytest.ini
# ETLPlus
#
# Copyright Â© 2026 Dagitali LLC. All rights reserved.

[pytest]
testpaths = tests/acceptance tests/contract tests/data_quality tests/e2e tests/integration tests/perf tests/resilience tests/smoke tests/unit
addopts = -ra --strict-markers
filterwarnings =
    error:.*is deprecated; use handler instance methods instead\.:DeprecationWarning
markers =
    # Level / scope
    unit: isolated correctness tests (no real external services)
    integration: multi-component tests with real-ish dependencies (fs/db/http/etc.)
    e2e: end-to-end pipeline tests (extract -> transform -> load)

    # Purpose / intent
    smoke: go/no-go viability tests for builds and environments (broad, shallow)
    contract: compatibility tests for public interfaces (CLI/config/schema/protocol)
    acceptance: user-facing behavior tests (CLI UX, exit codes, messages)
    data_quality: semantic invariants over outputs (counts, uniqueness, constraints)
    resilience: fault-injection and retry/backoff/recovery behavior
    perf: performance/throughput tests (excluded from default CI runs)

    # Environment / dependencies
    requires_docker: needs Docker/Compose (containers for services)
    requires_network: needs network access beyond localhost
    requires_optional_deps: needs optional extra dependencies installed

    # Special
    property: property-based tests (Hypothesis) for URL composition and encoding
